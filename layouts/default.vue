<!-- layouts/default.vue -->
<template>
  <div class="min-h-screen" :class="`bg-[${currentTheme.colors.background}]`">
    

    <!-- ä¸»è¦å…§å®¹å€åŸŸ -->
    <main class=" pb-16">
      <slot />
    </main>

    <!-- åº•éƒ¨å°èˆªæ¬„ -->
    <nav
      class="fixed bottom-0 left-0 right-0 card border-t"
      :class="`bg-[${currentTheme.colors.surface}] border-[${currentTheme.colors.textLight}]`"
    >
      <div class="grid grid-cols-4 h-16">
        <NuxtLink
          to="/"
          class="flex flex-col items-center justify-center"
          :class="`text-[${currentTheme.colors.text}]`"
        >
          <i class="text-xl mb-1">ğŸ“Š</i>
          <span class="text-xs">ç¸½è¦½</span>
        </NuxtLink>
        <NuxtLink
          to="/transactions"
          class="flex flex-col items-center justify-center"
          :class="`text-[${currentTheme.colors.text}]`"
        >
          <i class="text-xl mb-1">ğŸ“</i>
          <span class="text-xs">è¨˜éŒ„</span>
        </NuxtLink>
        <NuxtLink
          to="/statistics"
          class="flex flex-col items-center justify-center"
          :class="`text-[${currentTheme.colors.text}]`"
        >
          <i class="text-xl mb-1">ğŸ“ˆ</i>
          <span class="text-xs">çµ±è¨ˆ</span>
        </NuxtLink>
        <NuxtLink
          to="/settings"
          class="flex flex-col items-center justify-center"
          :class="`text-[${currentTheme.colors.text}]`"
        >
          <i class="text-xl mb-1">âš™ï¸</i>
          <span class="text-xs">è¨­å®š</span>
        </NuxtLink>
      </div>
    </nav>

    <!-- æ–°å¢è¨˜å¸³æŒ‰éˆ• -->
    <button 
      class="fixed right-4 bottom-20 w-14 h-14 rounded-full text-white text-2xl shadow-lg flex items-center justify-center"
      :class="`bg-[${currentTheme.colors.primary}]`"
      @click="navigateToAdd"
    >
      +
    </button>
  </div>
</template>

<script setup lang="ts">
import { useSupabaseAuth } from '~/composables/useSupabaseAuth'
useSupabaseAuth()

const router = useRouter()
const { currentTheme } = useTheme()

const toggleMenu = () => {
  // å¯¦ç¾é¸å–®åˆ‡æ›é‚è¼¯
}

const navigateToAdd = () => {
  router.push('/transactions/add')
}
</script>

<style scoped>
.router-link-active {
  color: var(--color-primary);
}

/* é‡å°ç§»å‹•è¨­å‚™çš„å„ªåŒ– */
@media (max-width: 640px) {
  .text-xs {
    font-size: 0.65rem;
  }
}

/* é˜²æ­¢ iOS æ©¡çš®ç­‹æ•ˆæœ */
html, body {
  overflow: hidden;
  position: fixed;
  width: 100%;
  height: 100%;
}

/* å…è¨±å…§å®¹å€åŸŸæ»¾å‹• */
main {
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  height: calc(100vh - 3.5rem - 4rem); /* æ‰£é™¤é ‚éƒ¨å’Œåº•éƒ¨å°èˆªçš„é«˜åº¦ */
}
</style>